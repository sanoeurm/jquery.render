/* automatically generated by JSCoverage - do not edit */
if (typeof _$jscoverage === 'undefined') _$jscoverage = {};
if (! _$jscoverage['jquery.render.js']) {
  _$jscoverage['jquery.render.js'] = [];
  _$jscoverage['jquery.render.js'][17] = 0;
  _$jscoverage['jquery.render.js'][18] = 0;
  _$jscoverage['jquery.render.js'][25] = 0;
  _$jscoverage['jquery.render.js'][26] = 0;
  _$jscoverage['jquery.render.js'][27] = 0;
  _$jscoverage['jquery.render.js'][30] = 0;
  _$jscoverage['jquery.render.js'][32] = 0;
  _$jscoverage['jquery.render.js'][33] = 0;
  _$jscoverage['jquery.render.js'][34] = 0;
  _$jscoverage['jquery.render.js'][36] = 0;
  _$jscoverage['jquery.render.js'][37] = 0;
  _$jscoverage['jquery.render.js'][41] = 0;
  _$jscoverage['jquery.render.js'][43] = 0;
  _$jscoverage['jquery.render.js'][44] = 0;
  _$jscoverage['jquery.render.js'][45] = 0;
  _$jscoverage['jquery.render.js'][46] = 0;
  _$jscoverage['jquery.render.js'][50] = 0;
  _$jscoverage['jquery.render.js'][53] = 0;
  _$jscoverage['jquery.render.js'][54] = 0;
  _$jscoverage['jquery.render.js'][55] = 0;
  _$jscoverage['jquery.render.js'][57] = 0;
  _$jscoverage['jquery.render.js'][60] = 0;
  _$jscoverage['jquery.render.js'][61] = 0;
  _$jscoverage['jquery.render.js'][64] = 0;
  _$jscoverage['jquery.render.js'][65] = 0;
  _$jscoverage['jquery.render.js'][66] = 0;
  _$jscoverage['jquery.render.js'][70] = 0;
  _$jscoverage['jquery.render.js'][72] = 0;
  _$jscoverage['jquery.render.js'][73] = 0;
  _$jscoverage['jquery.render.js'][86] = 0;
  _$jscoverage['jquery.render.js'][87] = 0;
  _$jscoverage['jquery.render.js'][91] = 0;
  _$jscoverage['jquery.render.js'][92] = 0;
  _$jscoverage['jquery.render.js'][93] = 0;
  _$jscoverage['jquery.render.js'][94] = 0;
  _$jscoverage['jquery.render.js'][96] = 0;
  _$jscoverage['jquery.render.js'][99] = 0;
  _$jscoverage['jquery.render.js'][100] = 0;
  _$jscoverage['jquery.render.js'][101] = 0;
  _$jscoverage['jquery.render.js'][102] = 0;
  _$jscoverage['jquery.render.js'][103] = 0;
  _$jscoverage['jquery.render.js'][104] = 0;
  _$jscoverage['jquery.render.js'][105] = 0;
  _$jscoverage['jquery.render.js'][107] = 0;
  _$jscoverage['jquery.render.js'][110] = 0;
  _$jscoverage['jquery.render.js'][111] = 0;
  _$jscoverage['jquery.render.js'][112] = 0;
  _$jscoverage['jquery.render.js'][113] = 0;
  _$jscoverage['jquery.render.js'][114] = 0;
  _$jscoverage['jquery.render.js'][115] = 0;
  _$jscoverage['jquery.render.js'][117] = 0;
  _$jscoverage['jquery.render.js'][122] = 0;
  _$jscoverage['jquery.render.js'][128] = 0;
  _$jscoverage['jquery.render.js'][133] = 0;
  _$jscoverage['jquery.render.js'][134] = 0;
  _$jscoverage['jquery.render.js'][135] = 0;
  _$jscoverage['jquery.render.js'][136] = 0;
  _$jscoverage['jquery.render.js'][139] = 0;
  _$jscoverage['jquery.render.js'][152] = 0;
  _$jscoverage['jquery.render.js'][153] = 0;
  _$jscoverage['jquery.render.js'][157] = 0;
  _$jscoverage['jquery.render.js'][158] = 0;
  _$jscoverage['jquery.render.js'][161] = 0;
  _$jscoverage['jquery.render.js'][162] = 0;
  _$jscoverage['jquery.render.js'][163] = 0;
  _$jscoverage['jquery.render.js'][165] = 0;
  _$jscoverage['jquery.render.js'][166] = 0;
  _$jscoverage['jquery.render.js'][169] = 0;
  _$jscoverage['jquery.render.js'][170] = 0;
  _$jscoverage['jquery.render.js'][171] = 0;
  _$jscoverage['jquery.render.js'][172] = 0;
  _$jscoverage['jquery.render.js'][173] = 0;
  _$jscoverage['jquery.render.js'][176] = 0;
  _$jscoverage['jquery.render.js'][181] = 0;
  _$jscoverage['jquery.render.js'][186] = 0;
  _$jscoverage['jquery.render.js'][187] = 0;
  _$jscoverage['jquery.render.js'][189] = 0;
  _$jscoverage['jquery.render.js'][190] = 0;
  _$jscoverage['jquery.render.js'][191] = 0;
  _$jscoverage['jquery.render.js'][192] = 0;
  _$jscoverage['jquery.render.js'][195] = 0;
  _$jscoverage['jquery.render.js'][196] = 0;
  _$jscoverage['jquery.render.js'][203] = 0;
  _$jscoverage['jquery.render.js'][204] = 0;
  _$jscoverage['jquery.render.js'][205] = 0;
  _$jscoverage['jquery.render.js'][207] = 0;
  _$jscoverage['jquery.render.js'][211] = 0;
  _$jscoverage['jquery.render.js'][212] = 0;
  _$jscoverage['jquery.render.js'][214] = 0;
  _$jscoverage['jquery.render.js'][233] = 0;
  _$jscoverage['jquery.render.js'][234] = 0;
  _$jscoverage['jquery.render.js'][235] = 0;
  _$jscoverage['jquery.render.js'][238] = 0;
  _$jscoverage['jquery.render.js'][239] = 0;
  _$jscoverage['jquery.render.js'][241] = 0;
  _$jscoverage['jquery.render.js'][242] = 0;
  _$jscoverage['jquery.render.js'][246] = 0;
  _$jscoverage['jquery.render.js'][250] = 0;
  _$jscoverage['jquery.render.js'][251] = 0;
  _$jscoverage['jquery.render.js'][252] = 0;
  _$jscoverage['jquery.render.js'][253] = 0;
  _$jscoverage['jquery.render.js'][255] = 0;
  _$jscoverage['jquery.render.js'][256] = 0;
  _$jscoverage['jquery.render.js'][257] = 0;
  _$jscoverage['jquery.render.js'][270] = 0;
  _$jscoverage['jquery.render.js'][271] = 0;
  _$jscoverage['jquery.render.js'][272] = 0;
  _$jscoverage['jquery.render.js'][275] = 0;
  _$jscoverage['jquery.render.js'][276] = 0;
  _$jscoverage['jquery.render.js'][277] = 0;
  _$jscoverage['jquery.render.js'][287] = 0;
  _$jscoverage['jquery.render.js'][288] = 0;
  _$jscoverage['jquery.render.js'][294] = 0;
}
_$jscoverage['jquery.render.js'][17]++;
(function ($) {
  _$jscoverage['jquery.render.js'][18]++;
  var cache = {}, word = {}, suffix = "", isLoaded = {}, isLoading = {}, language = "en", seek = (function (obj, keys) {
  _$jscoverage['jquery.render.js'][25]++;
  if (! keys.length) {
    _$jscoverage['jquery.render.js'][25]++;
    return obj;
  }
  _$jscoverage['jquery.render.js'][26]++;
  var key = keys.shift();
  _$jscoverage['jquery.render.js'][27]++;
  return seek(obj[key], keys);
}), inception = (function (obj, keys, val) {
  _$jscoverage['jquery.render.js'][30]++;
  var key = keys.shift();
  _$jscoverage['jquery.render.js'][32]++;
  if (! keys.length) {
    _$jscoverage['jquery.render.js'][33]++;
    obj[key] = val;
    _$jscoverage['jquery.render.js'][34]++;
    return obj;
  }
  else {
    _$jscoverage['jquery.render.js'][36]++;
    if (! obj[key]) {
      _$jscoverage['jquery.render.js'][36]++;
      obj[key] = {};
    }
    _$jscoverage['jquery.render.js'][37]++;
    return inception(obj[key], keys, val);
  }
}), currying = (function (f) {
  _$jscoverage['jquery.render.js'][41]++;
  var slice = Array.prototype.slice, arg = slice.call(arguments);
  _$jscoverage['jquery.render.js'][43]++;
  arg.shift();
  _$jscoverage['jquery.render.js'][44]++;
  return (function () {
  _$jscoverage['jquery.render.js'][45]++;
  var _arg = slice.call(arguments);
  _$jscoverage['jquery.render.js'][46]++;
  return f.apply(this, arg.concat(_arg));
});
}), escapeHTML = (function (s) {
  _$jscoverage['jquery.render.js'][50]++;
  return String(s).replace(/&/g, "&amp;").replace(/</g, "&lt;").replace(/>/g, "&gt;");
}), objectReplace = (function (obj, word, isRaw, key) {
  _$jscoverage['jquery.render.js'][53]++;
  var index = key.match(/\[(\d+)\]/);
  _$jscoverage['jquery.render.js'][54]++;
  if (index && index[1]) {
    _$jscoverage['jquery.render.js'][55]++;
    key = index[1];
  }
  _$jscoverage['jquery.render.js'][57]++;
  return isRaw? obj[key]: escapeHTML(obj[key]);
}), keyValReplace = (function (key, val, word, isRaw, type) {
  _$jscoverage['jquery.render.js'][60]++;
  var text = (type == "val")? val: key;
  _$jscoverage['jquery.render.js'][61]++;
  return isRaw? text: escapeHTML(text);
}), wordReplace = (function (text) {
  _$jscoverage['jquery.render.js'][64]++;
  var words = word[language];
  _$jscoverage['jquery.render.js'][65]++;
  return text.replace(/\$w\{([^\}]+)\}/g, (function (text, key) {
  _$jscoverage['jquery.render.js'][66]++;
  return escapeHTML(words[key]);
}));
}), each = (function (template, source) {
  _$jscoverage['jquery.render.js'][70]++;
  template = $("<div>" + template + "</div>");
  _$jscoverage['jquery.render.js'][72]++;
  template.find("[data-render]").each((function () {
  _$jscoverage['jquery.render.js'][73]++;
  var elem = $(this), data = elem.data("render").match(/^\$(?:\{|%7B)(.+)(?:\}|%7D)\.(\w+)$/), method = data[2], key = data[1], val = (key == "this" || key == "")? source: seek(source, key.replace(/(\[(\d+)\])/g, ".$2").replace(/^\./, "").split(".")), i = 0, length, childVal, child, childText, text = "";
  _$jscoverage['jquery.render.js'][86]++;
  elem.removeAttr("data-render");
  _$jscoverage['jquery.render.js'][87]++;
  child = (method == "in")? elem.html(): (method == "each")? elem[0].outerHTML: (method == "bind")? elem[0].outerHTML: "";
  _$jscoverage['jquery.render.js'][91]++;
  if (method == "bind") {
    _$jscoverage['jquery.render.js'][92]++;
    childText = child;
    _$jscoverage['jquery.render.js'][93]++;
    if ($("<div>" + child + "</div>").find("[data-render]").length) {
      _$jscoverage['jquery.render.js'][94]++;
      childText = each(child, val);
    }
    _$jscoverage['jquery.render.js'][96]++;
    text = childText.replace(/\$(r?){([^\}]+)}/g, currying(objectReplace, val)).replace(/\$(r?)(val|key)/g, currying(keyValReplace, key, val));
  }
  else {
    _$jscoverage['jquery.render.js'][99]++;
    if (val instanceof Array) {
      _$jscoverage['jquery.render.js'][100]++;
      length = val.length;
      _$jscoverage['jquery.render.js'][101]++;
      for (i = 0; i < length; i++) {
        _$jscoverage['jquery.render.js'][102]++;
        childVal = val[i];
        _$jscoverage['jquery.render.js'][103]++;
        childText = child;
        _$jscoverage['jquery.render.js'][104]++;
        if ($("<div>" + child + "</div>").find("[data-render]").length) {
          _$jscoverage['jquery.render.js'][105]++;
          childText = each(childText, childVal);
        }
        _$jscoverage['jquery.render.js'][107]++;
        text += childText.replace(/\$(r?){([^\}]+)}/g, currying(objectReplace, childVal)).replace(/\$(r?)(val)/g, currying(keyValReplace, null, childVal));
}
    }
    else {
      _$jscoverage['jquery.render.js'][110]++;
      if (typeof val === "object") {
        _$jscoverage['jquery.render.js'][111]++;
        for (key in val) {
          _$jscoverage['jquery.render.js'][112]++;
          childVal = val[key];
          _$jscoverage['jquery.render.js'][113]++;
          childText = child;
          _$jscoverage['jquery.render.js'][114]++;
          if ($("<div>" + child + "</div>").find("[data-render]").length) {
            _$jscoverage['jquery.render.js'][115]++;
            childText = each(childText, childVal);
          }
          _$jscoverage['jquery.render.js'][117]++;
          text += childText.replace(/\$(r?){([^\}]+)}/g, currying(objectReplace, childVal)).replace(/\$(r?)(val|key)/g, currying(keyValReplace, key, childVal));
}
      }
    }
  }
  _$jscoverage['jquery.render.js'][122]++;
  method == "in"? elem.html(text): method == "each"? elem.replaceWith(text): method == "bind"? elem.replaceWith(text): "";
}));
  _$jscoverage['jquery.render.js'][128]++;
  return template.html();
}), bind = (function (template, source) {
  _$jscoverage['jquery.render.js'][133]++;
  template = each(template, source);
  _$jscoverage['jquery.render.js'][134]++;
  var text = template.replace(/\$(r?)\{([^\}]+)\}/g, (function (word, isRaw, key) {
  _$jscoverage['jquery.render.js'][135]++;
  var text = seek(source, key.replace(/^this/, "").replace(/(\[(\d+)\])/g, ".$2").replace(/^\./, "").split("."));
  _$jscoverage['jquery.render.js'][136]++;
  return isRaw? text: escapeHTML(text);
}));
  _$jscoverage['jquery.render.js'][139]++;
  return isLoaded[language]? wordReplace(text): text;
});
  _$jscoverage['jquery.render.js'][152]++;
  $.fn.render = (function (template, source) {
  _$jscoverage['jquery.render.js'][153]++;
  var ajax = false, baseUrl, callback;
  _$jscoverage['jquery.render.js'][157]++;
  if (typeof template == "object" && ! (template instanceof String)) {
    _$jscoverage['jquery.render.js'][158]++;
    ajax = template;
  }
  _$jscoverage['jquery.render.js'][161]++;
  if (ajax) {
    _$jscoverage['jquery.render.js'][162]++;
    baseUrl = ajax.url + suffix;
    _$jscoverage['jquery.render.js'][163]++;
    callback = ajax.success;
    _$jscoverage['jquery.render.js'][165]++;
    return this.each((function () {
  _$jscoverage['jquery.render.js'][166]++;
  var elem = $(this), cnt = 1, replace = (function (template) {
  _$jscoverage['jquery.render.js'][169]++;
  template = $("<div>" + template + "</div>");
  _$jscoverage['jquery.render.js'][170]++;
  template.find("[data-include]").each((function () {
  _$jscoverage['jquery.render.js'][171]++;
  var child = $(this);
  _$jscoverage['jquery.render.js'][172]++;
  child.html(cache[child.data("include")]);
  _$jscoverage['jquery.render.js'][173]++;
  child.removeAttr("data-include");
}));
  _$jscoverage['jquery.render.js'][176]++;
  return template.find("[data-include]").length? replace(template.html()): template.html();
}), getTemplate = (function (url) {
  _$jscoverage['jquery.render.js'][181]++;
  $.ajax($.extend(true, ajax, {url: url, dataType: "text", success: (function (template) {
  _$jscoverage['jquery.render.js'][186]++;
  var child = $("<div>" + template + "</div>").find("[data-include]");
  _$jscoverage['jquery.render.js'][187]++;
  cnt = cnt + child.length - 1;
  _$jscoverage['jquery.render.js'][189]++;
  cache[url] = template;
  _$jscoverage['jquery.render.js'][190]++;
  if (cnt) {
    _$jscoverage['jquery.render.js'][191]++;
    child.each((function () {
  _$jscoverage['jquery.render.js'][192]++;
  getTemplate($(this).data("include"));
}));
  }
  else {
    _$jscoverage['jquery.render.js'][195]++;
    elem.html(bind(replace(cache[baseUrl]), source));
    _$jscoverage['jquery.render.js'][196]++;
    if (callback) {
      _$jscoverage['jquery.render.js'][196]++;
      callback();
    }
  }
})}));
});
  _$jscoverage['jquery.render.js'][203]++;
  if (cache[baseUrl]) {
    _$jscoverage['jquery.render.js'][204]++;
    elem.html(bind(replace(cache[baseUrl]), source));
    _$jscoverage['jquery.render.js'][205]++;
    if (callback) {
      _$jscoverage['jquery.render.js'][205]++;
      callback();
    }
  }
  else {
    _$jscoverage['jquery.render.js'][207]++;
    getTemplate(baseUrl);
  }
}));
  }
  else {
    _$jscoverage['jquery.render.js'][211]++;
    return this.each((function () {
  _$jscoverage['jquery.render.js'][212]++;
  var elem = $(this), text = bind(template, source);
  _$jscoverage['jquery.render.js'][214]++;
  elem.html(text);
}));
  }
});
  _$jscoverage['jquery.render.js'][233]++;
  $.word = (function (urls, def, fixed, callback) {
  _$jscoverage['jquery.render.js'][234]++;
  var lang = fixed || (navigator.browserLanguage || navigator.language || navigator.userLanguage).substr(0, 2);
  _$jscoverage['jquery.render.js'][235]++;
  language = lang = urls[lang]? lang: urls[def]? def: "en";
  _$jscoverage['jquery.render.js'][238]++;
  if (word[lang]) {
    _$jscoverage['jquery.render.js'][239]++;
    return;
  }
  else {
    _$jscoverage['jquery.render.js'][241]++;
    isLoading[lang] = true;
    _$jscoverage['jquery.render.js'][242]++;
    $.ajax({url: urls[lang], dataType: "text", success: (function (text) {
  _$jscoverage['jquery.render.js'][246]++;
  var settings = text.split(/\n/), length = settings.length, i, keyVal = [];
  _$jscoverage['jquery.render.js'][250]++;
  word[lang] = {};
  _$jscoverage['jquery.render.js'][251]++;
  for (i = 0; i < length; i++) {
    _$jscoverage['jquery.render.js'][252]++;
    keyVal = settings[i].split(/^([^=]+)=(.+)$/);
    _$jscoverage['jquery.render.js'][253]++;
    word[lang][keyVal[1]] = keyVal[2];
}
  _$jscoverage['jquery.render.js'][255]++;
  isLoading[lang] = false;
  _$jscoverage['jquery.render.js'][256]++;
  isLoaded[lang] = true;
  _$jscoverage['jquery.render.js'][257]++;
  callback();
})});
  }
});
  _$jscoverage['jquery.render.js'][270]++;
  $.renderSuffix = (function (userAgent) {
  _$jscoverage['jquery.render.js'][271]++;
  userAgent = userAgent || {};
  _$jscoverage['jquery.render.js'][272]++;
  var key = null, ua = $.__render__.userAgent;
  _$jscoverage['jquery.render.js'][275]++;
  for (key in userAgent) {
    _$jscoverage['jquery.render.js'][276]++;
    if (userAgent[key].test(ua)) {
      _$jscoverage['jquery.render.js'][277]++;
      suffix = key;
    }
}
});
  _$jscoverage['jquery.render.js'][287]++;
  $.clearSuffix = (function () {
  _$jscoverage['jquery.render.js'][288]++;
  suffix = "";
});
  _$jscoverage['jquery.render.js'][294]++;
  $.__render__ = {seek: seek, inception: inception, escapeHTML: escapeHTML, word: word, userAgent: navigator.userAgent};
})(jQuery);
_$jscoverage['jquery.render.js'].source = ["/*!"," * jquery.render v1.2.4"," * http://sideroad.secret.jp/"," *"," * Template render plugin"," * "," * Copyright (c) 2011 sideroad"," *"," * Dual licensed under the MIT or GPL licenses."," * Date: 2011-03-03"," * "," * @author sideroad"," * @requires jQuery"," * "," */","","(function( $ ) {","    var cache = {},","        word = {},","\t\tsuffix = \"\",","        isLoaded = {},","        isLoading = {},","        language = \"en\",","        seek = function( obj, keys ){","            if( !keys.length ) return obj;","            var key = keys.shift();","            return seek( obj[ key ], keys );","        },","        inception = function( obj, keys, val ){","            var key = keys.shift();","            ","            if( !keys.length) {","                obj[ key ] = val;","                return obj;","            } else {","                if( !obj[ key ]) obj[key] = {};","                return inception( obj[ key ], keys, val );","            }            ","        },","        currying = function(f){","            var slice = Array.prototype.slice,","                arg = slice.call(arguments);","            arg.shift();","            return function(){","                var _arg = slice.call(arguments);","                return f.apply(this, arg.concat(_arg));","            };","        },","\t\tescapeHTML = function( s ){","            return String( s ).replace(/&amp;/g, '&amp;amp;').replace(/&lt;/g, '&amp;lt;').replace(/&gt;/g, '&amp;gt;');","        },","        objectReplace = function( obj, word, isRaw, key ){","            var index = key.match( /\\[(\\d+)\\]/ );","            if ( index &amp;&amp; index[ 1 ] ) {","                key = index[ 1 ];","            }","            return isRaw ? obj[ key ] : escapeHTML( obj[ key ] );","        },","        keyValReplace = function( key, val, word, isRaw, type ){","            var text = ( type == \"val\" ) ? val : key;","            return isRaw ? text : escapeHTML( text );","        },","        wordReplace = function( text ){","            var words = word[ language ];","            return text.replace(/\\$w\\{([^\\}]+)\\}/g, function( text, key ){","                return escapeHTML( words[ key ] );","            });","        },","        each = function( template, source ) {","            template = $(\"&lt;div&gt;\"+template+\"&lt;/div&gt;\");","            ","            template.find(\"[data-render]\").each(function(){","                    var elem = $(this),","                    data = elem.data(\"render\").match(/^\\$(?:\\{|%7B)(.+)(?:\\}|%7D)\\.(\\w+)$/),","                    method = data[2],","                    key = data[1],","                    val = ( key == \"this\" || key == \"\" ) ? source : ","                          seek( source, key.replace(/(\\[(\\d+)\\])/g,\".$2\").replace(/^\\./,\"\").split( \".\" ) ),","                    i = 0,","                    length,","                    childVal,","                    child,","                    childText,","                    text = \"\";","                ","                elem.removeAttr(\"data-render\");","                child = (method == \"in\") ? elem.html() :","                        (method == \"each\") ? elem[0].outerHTML : ","                        (method == \"bind\") ? elem[0].outerHTML : \"\";","                ","                if(method == \"bind\"){","                    childText = child;","                    if( $(\"&lt;div&gt;\"+child+\"&lt;/div&gt;\").find(\"[data-render]\").length ){","                        childText = each( child, val );","                    }","                    text = childText.replace( /\\$(r?){([^\\}]+)}/g, currying( objectReplace, val))","                                    .replace( /\\$(r?)(val|key)/g, currying( keyValReplace, key, val ));","                } else {","                    if( val instanceof Array ) {","                        length = val.length;","                        for( i = 0; i&lt;length; i++ ) {","                            childVal = val[ i ];","                            childText = child;","                            if( $(\"&lt;div&gt;\"+child+\"&lt;/div&gt;\").find(\"[data-render]\").length ){","                                childText = each( childText, childVal );","                            }","                            text += childText.replace( /\\$(r?){([^\\}]+)}/g, currying( objectReplace, childVal ))","                                             .replace( /\\$(r?)(val)/g, currying( keyValReplace, null, childVal ));","                        }","                    } else if( typeof val === \"object\" ) {","                        for( key in val ) {","                            childVal = val[ key ];","                            childText = child;","                            if( $(\"&lt;div&gt;\"+child+\"&lt;/div&gt;\").find(\"[data-render]\").length ){","                                childText = each( childText, childVal );","                            }","                            text += childText.replace( /\\$(r?){([^\\}]+)}/g, currying( objectReplace, childVal))","                                             .replace( /\\$(r?)(val|key)/g, currying( keyValReplace, key, childVal ));","                        }","                    }","                }","                method == \"in\" ? elem.html(text) : ","                method == \"each\" ? elem.replaceWith( text ) : ","                method == \"bind\" ? elem.replaceWith( text ) : \"\";","                ","            });","            ","            return template.html();","            ","        },","        bind = function( template, source ){","            ","            template = each( template, source );","            var text = template.replace( /\\$(r?)\\{([^\\}]+)\\}/g, function( word, isRaw, key ){","                var text = seek( source, key.replace(/^this/, \"\" ).replace(/(\\[(\\d+)\\])/g,\".$2\").replace(/^\\./,\"\").split( \".\" ) );","                return isRaw ? text : escapeHTML( text );","            });","                ","            return ( isLoaded[ language ] ) ? wordReplace( text ) : text;","            ","        };","    ","    /**","     * $.fn.render","     * Replace template string by the source object","     * The template string is taken by Ajax when the first parameter is object.","     * @namespace","     * @param {String||Object} template string or Ajax settings","     * @param {Object} source object","     * @returns {Object} jQuery element object","     */","    $.fn.render = function( template, source ){","        var ajax = false,","            baseUrl,","            callback;","        ","        if ( typeof template == \"object\" &amp;&amp; ! ( template instanceof String ) ) {","            ajax = template;","        }","","        if( ajax ){","            baseUrl = ajax.url + suffix;","            callback = ajax.success;","            ","            return this.each( function(){","                var elem = $(this),","                    cnt = 1,","                    replace = function(template){","                        template = $(\"&lt;div&gt;\"+template+\"&lt;/div&gt;\");","                        template.find(\"[data-include]\").each(function(){","                            var child = $(this);","                            child.html(cache[child.data(\"include\")]);","                            child.removeAttr(\"data-include\");","                        });","                        ","                        return template.find(\"[data-include]\").length ? replace( template.html() ) : template.html();","                        ","                    },","                    getTemplate = function(url){","        ","                        $.ajax( $.extend( true, ","                            ajax, {","                                url : url,","                                dataType : \"text\",","                                success : function( template ){","                                    var child = $(\"&lt;div&gt;\"+template+\"&lt;/div&gt;\").find(\"[data-include]\");","                                    cnt = cnt + child.length -1;","                                    ","                                    cache[ url ] = template;","                                    if(cnt){","                                        child.each(function(){                                       ","                                            getTemplate($(this).data(\"include\")); ","                                        });","                                    } else {","                                        elem.html( bind( replace( cache[ baseUrl ] ), source ) );","                                        if ( callback ) callback();    ","                                    }","                                    ","                                }","                            }","                        ));","                    };","                if( cache[ baseUrl ] ) {","                    elem.html( bind( replace( cache[ baseUrl ] ), source ) );","                    if ( callback ) callback();","                } else {","                    getTemplate(baseUrl);","                }","            });","        } else {","            return this.each( function(){","                var elem = $(this),","\t\t\t\t    text = bind( template, source );","                elem.html( text );","            } );","        }","    };","    ","","    /**","     * $.word","     * Load a word setting file","     * Language is automatically taken by navigator object, which you omit a set language.","     * ","     * @namespace","     * @param {Object} word files URL","     *     exp)","     *     { en : \"word.en\", ja : \"word.ja\"}","     * @param {String} Default Language ( Omittable )","     * @param {String} Fixed Language ( Omittable )","     * @param {Function} Callback function ( Omittable )","     */","    $.word = function( urls, def, fixed, callback ){","        var lang = fixed || (navigator.browserLanguage || navigator.language || navigator.userLanguage).substr(0,2);","        language = lang = ( urls[ lang ] ) ? lang : ","                                   ( urls[def] ) ? def : \"en\";","        ","        if( word[ lang ] ) {","            return;","        } else {","            isLoading[ lang ] = true;        ","            $.ajax({","                url : urls[ lang ],","                dataType : \"text\",","                success : function( text ){","                    var settings = text.split(/\\n/),","                        length = settings.length,","                        i,","                    keyVal = [];","                word[ lang ] = {};","                for( i = 0; i &lt; length; i ++ ){","                    keyVal = settings[ i ].split(/^([^=]+)=(.+)$/);","                    word[ lang ][ keyVal[ 1 ] ] = keyVal[ 2 ];","                }","                isLoading[ lang ] = false;","                isLoaded[ lang ] = true;","                callback();","            }","        });","        }","    };","\t","\t/**","\t * Set render file suffix which called ajax render request","\t * @namespace","     * @param {Object} userAgents setting","     *     exp)","     *     { \".an\" : /Android/, \".ip\" : /iPhone|iPad/ }","\t */","\t$.renderSuffix = function( userAgent ){","\t\tuserAgent = userAgent || {};","\t\tvar key = null,","\t\t\tua = $.__render__.userAgent;","\t\t","\t\tfor( key in userAgent ){","\t\t\tif( userAgent[ key ].test( ua ) ){","\t\t\t\tsuffix =  key;","\t\t\t}","\t\t}","\t};","\t","\t/**","\t * Clear suffix settings","\t * @namespace","\t * ","\t */","\t$.clearSuffix = function(){","\t    suffix = \"\";","\t};","    ","    /**","     * Export local value for Unit testing","     */","    $.__render__ = {","            seek : seek,","            inception : inception,","\t\t\tescapeHTML : escapeHTML,","            word : word,","\t\t\tuserAgent : navigator.userAgent","    };","","    ","})( jQuery );"];
